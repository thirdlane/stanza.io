{"version":3,"sources":["../src/types.js"],"names":[],"mappings":";;;;;;uBAAoB,UAAU;;qBAGf,UAAU,GAAG,EAAE;;AAE1B,QAAI,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;;AAGtB,SAAK,CAAC,YAAY,GAAG,UAAU,IAAI,EAAE,OAAO,EAAE;;AAE1C,eAAO;AACH,eAAG,EAAE,eAAY;;AAEb,oBAAI,GAAG,GAAG,aAbjB,GAAG,CAasB,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC;AACtD,oBAAI,OAAO,EAAE;AACT,uBAAG,CAAC,OAAO,GAAG,IAAI,CAAC;iBACtB;AACD,uBAAO,GAAG,CAAC;aACd;AACD,eAAG,EAAE,aAAU,KAAK,EAAE;;AAElB,qBAAK,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,QAAQ,EAAE,CAAC,CAAC;aAChE;SACJ,CAAC;KACL,CAAC;;AAEF,SAAK,CAAC,MAAM,GAAG,UAAU,EAAE,EAAE,GAAG,EAAE,OAAO,EAAE;;AAEvC,eAAO;AACH,eAAG,EAAE,eAAY;;AAEb,oBAAI,GAAG,GAAG,aA/BjB,GAAG,CA+BsB,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC,CAAC;AACvD,oBAAI,OAAO,EAAE;AACT,uBAAG,CAAC,OAAO,GAAG,IAAI,CAAC;iBACtB;AACD,uBAAO,GAAG,CAAC;aACd;AACD,eAAG,EAAE,aAAU,KAAK,EAAE;;AAElB,qBAAK,CAAC,UAAU,CAAC,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,CAAC,KAAK,IAAI,EAAE,CAAA,CAAE,QAAQ,EAAE,CAAC,CAAC;aACjE;SACJ,CAAC;KACL,CAAC;;AAEF,SAAK,CAAC,MAAM,GAAG,KAAK,CAAC,KAAK,CACtB,UAAU,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,UAAU,EAAE;;AAEhC,YAAI,GAAG,YAAA;YAAE,GAAG,YAAA;YAAE,KAAK,YAAA,CAAC;AACpB,YAAI,IAAI,GAAG,CAAC,CAAC,CAAC;AACd,YAAI,SAAS,GAAG,KAAK,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,EAAE,GAAG,CAAC,CAAC;;AAE/C,YAAI,CAAC,SAAS,EAAE;AACZ,mBAAO,UAAU,CAAC;SACrB;;AAED,YAAI,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AAC7B,gBAAI,GAAG,CAAC,CAAC;AACT,qBAAS,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;SAClC;;AAED,aAAK,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AAC7B,WAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAC7B,WAAG,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;AAC7B,eAAO,CAAC,GAAG,GAAG,EAAE,GAAG,GAAG,CAAA,GAAI,IAAI,CAAC;KAClC,EACD,UAAU,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE;;AAE3B,YAAI,GAAG,YAAA;YAAE,GAAG,YAAA,CAAC;AACb,YAAI,SAAS,GAAG,GAAG,CAAC;AACpB,YAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;AAC3B,gBAAI,KAAK,GAAG,CAAC,EAAE;AACX,qBAAK,GAAG,CAAC,KAAK,CAAC;AACf,yBAAS,GAAG,GAAG,CAAC;aACnB;AACD,eAAG,GAAG,KAAK,GAAG,EAAE,CAAC;AACjB,eAAG,GAAG,KAAK,GAAG,EAAE,CAAC;AACjB,qBAAS,IAAI,CAAC,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAA,GAAI,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,CAAA,AAAC,GAAG,GAAG,CAAC;SAChF,MAAM;AACH,qBAAS,GAAG,KAAK,CAAC;SACrB;AACD,aAAK,CAAC,UAAU,CAAC,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,SAAS,CAAC,CAAC;KAC7C,CACJ,CAAC;CACL","file":"types.js","sourcesContent":["import { JID } from 'xmpp-jid';\n\n\nexport default function (JXT) {\n\n    let Utils = JXT.utils;\n\n\n    Utils.jidAttribute = function (attr, prepped) {\n\n        return {\n            get: function () {\n\n                let jid = new JID(Utils.getAttribute(this.xml, attr));\n                if (prepped) {\n                    jid.prepped = true;\n                }\n                return jid;\n            },\n            set: function (value) {\n\n                Utils.setAttribute(this.xml, attr, (value || '').toString());\n            }\n        };\n    };\n\n    Utils.jidSub = function (NS, sub, prepped) {\n\n        return {\n            get: function () {\n\n                let jid = new JID(Utils.getSubText(this.xml, NS, sub));\n                if (prepped) {\n                    jid.prepped = true;\n                }\n                return jid;\n            },\n            set: function (value) {\n\n                Utils.setSubText(this.xml, NS, sub, (value || '').toString());\n            }\n        };\n    };\n\n    Utils.tzoSub = Utils.field(\n        function (xml, NS, sub, defaultVal) {\n\n            let hrs, min, split;\n            let sign = -1;\n            let formatted = Utils.getSubText(xml, NS, sub);\n\n            if (!formatted) {\n                return defaultVal;\n            }\n\n            if (formatted.charAt(0) === '-') {\n                sign = 1;\n                formatted = formatted.slice(1);\n            }\n\n            split = formatted.split(':');\n            hrs = parseInt(split[0], 10);\n            min = parseInt(split[1], 10);\n            return (hrs * 60 + min) * sign;\n        },\n        function (xml, NS, sub, value) {\n\n            let hrs, min;\n            let formatted = '-';\n            if (typeof value === 'number') {\n                if (value < 0) {\n                    value = -value;\n                    formatted = '+';\n                }\n                hrs = value / 60;\n                min = value % 60;\n                formatted += (hrs < 10 ? '0' : '') + hrs + ':' + (min < 10 ? '0' : '') + min;\n            } else {\n                formatted = value;\n            }\n            Utils.setSubText(xml, NS, sub, formatted);\n        }\n    );\n}\n"]}