{"version":3,"sources":["../src/muc.js"],"names":[],"mappings":"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","file":"muc.js","sourcesContent":["import { Namespace as NS } from 'xmpp-constants';\n\n\nfunction proxy (child, field) {\n\n    return {\n        get: function () {\n\n            if (this._extensions[child]) {\n                return this[child][field];\n            }\n        },\n        set: function (value) {\n\n            this[child][field] = value;\n        }\n    };\n}\n\n\nexport default function (JXT) {\n\n    let Utils = JXT.utils;\n\n    let UserItem = JXT.define({\n        name: '_mucUserItem',\n        namespace: NS.MUC_USER,\n        element: 'item',\n        fields: {\n            affiliation: Utils.attribute('affiliation'),\n            nick: Utils.attribute('nick'),\n            jid: Utils.jidAttribute('jid'),\n            role: Utils.attribute('role'),\n            reason: Utils.textSub(NS.MUC_USER, 'reason')\n        }\n    });\n\n    let UserActor = JXT.define({\n        name: '_mucUserActor',\n        namespace: NS.MUC_USER,\n        element: 'actor',\n        fields: {\n            nick: Utils.attribute('nick'),\n            jid: Utils.jidAttribute('jid')\n        }\n    });\n\n    let Destroyed = JXT.define({\n        name: 'destroyed',\n        namespace: NS.MUC_USER,\n        element: 'destroy',\n        fields: {\n            jid: Utils.jidAttribute('jid'),\n            reason: Utils.textSub(NS.MUC_USER, 'reason')\n        }\n    });\n\n    let Invite = JXT.define({\n        name: 'invite',\n        namespace: NS.MUC_USER,\n        element: 'invite',\n        fields: {\n            to: Utils.jidAttribute('to'),\n            from: Utils.jidAttribute('from'),\n            reason: Utils.textSub(NS.MUC_USER, 'reason'),\n            thread: Utils.subAttribute(NS.MUC_USER, 'continue', 'thread'),\n            'continue': Utils.boolSub(NS.MUC_USER, 'continue')\n        }\n    });\n\n    let Decline = JXT.define({\n        name: 'decline',\n        namespace: NS.MUC_USER,\n        element: 'decline',\n        fields: {\n            to: Utils.jidAttribute('to'),\n            from: Utils.jidAttribute('from'),\n            reason: Utils.textSub(NS.MUC_USER, 'reason')\n        }\n    });\n\n    let AdminItem = JXT.define({\n        name: '_mucAdminItem',\n        namespace: NS.MUC_ADMIN,\n        element: 'item',\n        fields: {\n            affiliation: Utils.attribute('affiliation'),\n            nick: Utils.attribute('nick'),\n            jid: Utils.jidAttribute('jid'),\n            role: Utils.attribute('role'),\n            reason: Utils.textSub(NS.MUC_ADMIN, 'reason')\n        }\n    });\n\n    let AdminActor = JXT.define({\n        name: 'actor',\n        namespace: NS.MUC_USER,\n        element: 'actor',\n        fields: {\n            nick: Utils.attribute('nick'),\n            jid: Utils.jidAttribute('jid')\n        }\n    });\n\n    let Destroy = JXT.define({\n        name: 'destroy',\n        namespace: NS.MUC_OWNER,\n        element: 'destroy',\n        fields: {\n            jid: Utils.jidAttribute('jid'),\n            password: Utils.textSub(NS.MUC_OWNER, 'password'),\n            reason: Utils.textSub(NS.MUC_OWNER, 'reason')\n        }\n    });\n\n    let MUC = JXT.define({\n        name: 'muc',\n        namespace: NS.MUC_USER,\n        element: 'x',\n        fields: {\n            affiliation: proxy('_mucUserItem', 'affiliation'),\n            nick: proxy('_mucUserItem', 'nick'),\n            jid: proxy('_mucUserItem', 'jid'),\n            role: proxy('_mucUserItem', 'role'),\n            actor: proxy('_mucUserItem', '_mucUserActor'),\n            reason: proxy('_mucUserItem', 'reason'),\n            password: Utils.textSub(NS.MUC_USER, 'password'),\n            codes: {\n                get: function () {\n\n                    return Utils.getMultiSubText(this.xml, NS.MUC_USER, 'status', function (sub) {\n\n                        return Utils.getAttribute(sub, 'code');\n                    });\n                },\n                set: function (value) {\n\n                    let self = this;\n                    Utils.setMultiSubText(this.xml, NS.MUC_USER, 'status', value, function (val) {\n\n                        let child = Utils.createElement(NS.MUC_USER, 'status', NS.MUC_USER);\n                        Utils.setAttribute(child, 'code', val);\n                        self.xml.appendChild(child);\n                    });\n                }\n            }\n        }\n    });\n\n    let MUCAdmin = JXT.define({\n        name: 'mucAdmin',\n        namespace: NS.MUC_ADMIN,\n        element: 'query',\n        fields: {\n            affiliation: proxy('_mucAdminItem', 'affiliation'),\n            nick: proxy('_mucAdminItem', 'nick'),\n            jid: proxy('_mucAdminItem', 'jid'),\n            role: proxy('_mucAdminItem', 'role'),\n            actor: proxy('_mucAdminItem', '_mucAdminActor'),\n            reason: proxy('_mucAdminItem', 'reason')\n        }\n    });\n\n    let MUCOwner = JXT.define({\n        name: 'mucOwner',\n        namespace: NS.MUC_OWNER,\n        element: 'query'\n    });\n\n    let MUCJoin = JXT.define({\n        name: 'joinMuc',\n        namespace: NS.MUC,\n        element: 'x',\n        fields: {\n            password: Utils.textSub(NS.MUC, 'password'),\n            history: {\n                get: function () {\n\n                    let result = {};\n                    let hist = Utils.find(this.xml, NS.MUC, 'history');\n\n                    if (!hist.length) {\n                        return {};\n                    }\n                    hist = hist[0];\n\n                    let maxchars = hist.getAttribute('maxchars') || '';\n                    let maxstanzas = hist.getAttribute('maxstanzas') || '';\n                    let seconds = hist.getAttribute('seconds') || '';\n                    let since = hist.getAttribute('since') || '';\n\n\n                    if (maxchars) {\n                        result.maxchars = parseInt(maxchars, 10);\n                    }\n                    if (maxstanzas) {\n                        result.maxstanzas = parseInt(maxstanzas, 10);\n                    }\n                    if (seconds) {\n                        result.seconds = parseInt(seconds, 10);\n                    }\n                    if (since) {\n                        result.since = new Date(since);\n                    }\n                },\n                set: function (opts) {\n\n                    let existing = Utils.find(this.xml, NS.MUC, 'history');\n                    if (existing.length) {\n                        for (let i = 0; i < existing.length; i++) {\n                            this.xml.removeChild(existing[i]);\n                        }\n                    }\n\n                    let hist = Utils.createElement(NS.MUC, 'history', NS.MUC);\n                    this.xml.appendChild(hist);\n\n                    if (opts.maxchars) {\n                        hist.setAttribute('maxchars', '' + opts.maxchars);\n                    }\n                    if (opts.maxstanzas) {\n                        hist.setAttribute('maxstanzas', '' + opts.maxstanzas);\n                    }\n                    if (opts.seconds) {\n                        hist.setAttribute('seconds', '' + opts.seconds);\n                    }\n                    if (opts.since) {\n                        hist.setAttribute('since', opts.since.toISOString());\n                    }\n                }\n            }\n        }\n    });\n\n    let DirectInvite = JXT.define({\n        name: 'mucInvite',\n        namespace: NS.MUC_DIRECT_INVITE,\n        element: 'x',\n        fields: {\n            jid: Utils.jidAttribute('jid'),\n            password: Utils.attribute('password'),\n            reason: Utils.attribute('reason'),\n            thread: Utils.attribute('thread'),\n            'continue': Utils.boolAttribute('continue')\n        }\n    });\n\n\n    JXT.extend(UserItem, UserActor);\n    JXT.extend(MUC, UserItem);\n    JXT.extend(MUC, Invite, 'invites');\n    JXT.extend(MUC, Decline);\n    JXT.extend(MUC, Destroyed);\n    JXT.extend(AdminItem, AdminActor);\n    JXT.extend(MUCAdmin, AdminItem, 'items');\n    JXT.extend(MUCOwner, Destroy);\n\n\n    JXT.extendPresence(MUC);\n    JXT.extendPresence(MUCJoin);\n\n    JXT.extendMessage(MUC);\n    JXT.extendMessage(DirectInvite);\n\n    JXT.withIQ(function (IQ) {\n\n        JXT.add(IQ, 'mucUnique', Utils.textSub(NS.MUC_UNIQUE, 'unique'));\n        JXT.extend(IQ, MUCAdmin);\n        JXT.extend(IQ, MUCOwner);\n    });\n\n    JXT.withDataForm(function (DataForm) {\n\n        JXT.extend(MUCOwner, DataForm);\n    });\n}\n"]}